# ===================================================================
# Spring Boot configuration.
#
# This configuration will be overriden by the Spring profile you use,
# for example application-dev.yml if you use the "dev" profile.
# ===================================================================

# ===================================================================
# Standard Spring Boot properties.
# Full reference is available at:
# http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html
# ===================================================================

fixedRate:
  in:
    milliseconds: 300000 # 5 minutes

spring:
  application:
    name: db-converter
  datasource:
    name: source
    jdbc-url: jdbc:postgresql://localhost:5432/opensrp_test
    username: opensrp_admin
    password: admin
    driver-class-name: org.postgresql.Driver
  target-datasource:
    name: target
    jdbc-url: jdbc:postgresql://localhost:5432/dbconverter
    username: postgres
    password: postgres
    driver-class-name: org.postgresql.Driver

source-database:
  tables:
  - name: core.client
    query: SELECT * FROM ${source-database.tables[0].name} WHERE id > ${source-database.tables[0].lastId}
    lastId: 0
  - name: core.event
    lastId: 0
    query: SELECT * FROM ${source-database.tables[1].name} WHERE id > ${source-database.tables[1].lastId}
  - name: core.client_metadata
    lastId: 0
    query: SELECT * FROM ${source-database.tables[2].name} WHERE id > ${source-database.tables[2].lastId}
  - name: core.event_metadata
    lastId: 0
    query: SELECT * FROM ${source-database.tables[3].name} WHERE id > ${source-database.tables[3].lastId}

target-database:
  tables:
    - identitas_ibu